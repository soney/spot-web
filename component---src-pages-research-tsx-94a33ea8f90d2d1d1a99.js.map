{"version":3,"sources":["webpack:///./src/components/authors.tsx","webpack:///./node_modules/core-js/modules/es6.array.find.js","webpack:///./src/components/publications.tsx","webpack:///./src/pages/research.tsx","webpack:///./src/components/publication-list.tsx"],"names":["AuthorDisplay","props","context","render","data","this","className","highlight","withLinks","membership","data-author-id","id","to","given_name","family_name","homepage","href","target","React","AuthorListDisplay","highlightAuthors","authorDisplays","authors","map","a","includes","key","length","splice","i","$export","$find","forced","Array","P","F","find","callbackfn","arguments","undefined","AwardType","PublicationSummaryDisplay","venue","from","downloadName","getDownloadName","venue_str","short_name","year","pdfDisplay","pdf","publicURL","download","detailLevel","PublicationDetailLevel","title","data-authors","join","short_description","AwardDisplay","award","description","award_description","type","best_paper","honorable_mention","none","iconDisplay","pub","shortAuthors","replace","indexQuery","focusAreas","allStrapiCluster","nodes","cluster","publications","detailedPubs","allStrapiPublication","p","strapiId","source","groupByVenue","j","Math","floor","random","shuffle","active","SpotPage","research","PublicationListDisplay","backTo","venuePubs","Map","idToVenueYear","venueTimes","forEach","vid","has","get","push","set","conference_start","match","RegExp","split","d","parseInt","month","day","Date","getTime","vOrder","keys","sort","b","aVenueTime","vyDisplays","venueString","pubDisplays","venueDisplay","vyid"],"mappings":"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","file":"component---src-pages-research-tsx-94a33ea8f90d2d1d1a99.js","sourcesContent":["import * as React from 'react'\r\nimport { StrapiAuthor } from '../../graphql-types';\r\nimport Link from 'gatsby-link'\r\n\r\ninterface AuthorDisplayProps {\r\n    data: StrapiAuthor,\r\n    withLinks?: boolean,\r\n    highlight?: boolean\r\n}\r\n\r\nexport class AuthorDisplay extends React.Component<AuthorDisplayProps, {}> {\r\n    constructor(props: AuthorDisplayProps, context: {}) {\r\n        super(props, context);\r\n    }\r\n    public render(): JSX.Element {\r\n        const { data } = this.props;\r\n        const className = this.props.highlight ? 'highlight paper-author' : 'paper-author';\r\n        if(this.props.withLinks) {\r\n            if((data.membership === 'lead')/* || (data.membership === 'member')*/) {\r\n                return <span data-author-id={data.id} className={className}><Link className=\"author-internal-link\" to={`/${data.given_name}_${data.family_name}`}>{`${data.given_name} ${data.family_name}`}</Link></span>\r\n            } else if(data.homepage) {\r\n                return <span data-author-id={data.id} className={className}><a className=\"author-external-link\" href={data.homepage} target=\"_blank\">{`${data.given_name} ${data.family_name}`}</a></span>\r\n            }\r\n        }\r\n        return <span data-author-id={data.id} className={className}>{`${data.given_name} ${data.family_name}`}</span>\r\n    }\r\n}\r\n\r\ninterface AuthorListDisplayProps {\r\n    authors: ReadonlyArray<StrapiAuthor>,\r\n    withLinks?: boolean\r\n    highlightAuthors?: number[]\r\n}\r\nexport class AuthorListDisplay extends React.Component<AuthorListDisplayProps, {}> {\r\n    constructor(props: AuthorListDisplayProps, context: {}) {\r\n        super(props, context);\r\n    }\r\n\r\n    public render(): JSX.Element {\r\n        const { highlightAuthors, authors } = this.props;\r\n        const authorDisplays:(string | JSX.Element)[] = authors.map((a) => <AuthorDisplay highlight={(highlightAuthors && (highlightAuthors.includes(a.id as any)))} withLinks={this.props.withLinks} key={a.id} data={a} />)\r\n        if (authorDisplays.length === 2) {\r\n            authorDisplays.splice(1, 0, ' and ');\r\n        } else if (authorDisplays.length > 2) {\r\n            authorDisplays.splice(authorDisplays.length-1, 0, ', and ');\r\n            for(let i: number = authorDisplays.length-3; i>0; i--) {\r\n                authorDisplays.splice(i, 0, ', ');\r\n            }\r\n        }\r\n\r\n        return <span className='paper-author-list'>{authorDisplays}</span>;\r\n    }\r\n}","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","import '@fortawesome/fontawesome-free/scss/fontawesome.scss';\r\nimport '@fortawesome/fontawesome-free/scss/solid.scss';\r\nimport Link from 'gatsby-link';\r\nimport * as React from 'react';\r\nimport { StrapiAuthor, StrapiPublication } from '../../graphql-types';\r\nimport { AuthorListDisplay } from './authors';\r\nimport { PublicationDetailLevel } from './publication-list';\r\n\r\n\r\ninterface PublicationSummaryDisplayProps {\r\n    data: StrapiPublication\r\n    highlightAuthors?: number[]\r\n    detailLevel: PublicationDetailLevel\r\n}\r\n\r\nexport class PublicationSummaryDisplay extends React.Component<PublicationSummaryDisplayProps, {}> {\r\n    constructor(props: PublicationSummaryDisplayProps, context: {}) {\r\n        super(props, context)\r\n    }\r\n    public render(): JSX.Element {\r\n        const { data } = this.props;\r\n        const { venue } = data;\r\n        const authors = Array.from(data.authors) as any as StrapiAuthor[];\r\n        const downloadName = getDownloadName(data);\r\n\r\n        let venue_str: string|JSX.Element = '';\r\n        if(venue) {\r\n            if(venue) {\r\n                venue_str = `${venue.short_name} ${venue.year}`;\r\n            } else {\r\n                venue_str = `${venue.year}`;\r\n            }\r\n\r\n            if(venue.homepage) {\r\n                venue_str = <a target='_blank' href={venue.homepage}>{venue_str}</a>;\r\n            }\r\n        } else {\r\n            venue_str = ``;\r\n        }\r\n        const pdfDisplay = data.pdf ? <a className=\"pdf-download\" href={data.pdf.publicURL} download={downloadName}>PDF</a> : null;\r\n\r\n        if(this.props.detailLevel === PublicationDetailLevel.title) {\r\n            return <Link className=\"paper-title\" to={`/${downloadName}`}>{data.title}</Link>;\r\n        } else {\r\n            return <div className=\"paper row\" data-authors={authors.map((a) => a.id).join(',')}>\r\n                <div className=\"col-sm-10\">\r\n                    <Link className=\"paper-title\" to={`/${downloadName}`}>{data.title}</Link>\r\n                    <div className=\"paper-authors\"><AuthorListDisplay authors={authors} withLinks={true} highlightAuthors={this.props.highlightAuthors} /></div>\r\n                    {data.short_description && <p className=\"paper-description\">{data.short_description}</p>}\r\n                </div>\r\n                <div className=\"col-sm-2 text-left\">\r\n                    <div className=\"paper-venue\">{venue_str}</div>\r\n                    <div className=\"paper-award\"><AwardDisplay data={data.award} description={data.award_description} /></div>\r\n                    <div className=\"paper-pdf\">{pdfDisplay}</div>\r\n                </div>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n\r\nenum AwardType {\r\n    best_paper,\r\n    honorable_mention,\r\n    none\r\n};\r\ninterface AwardDisplayProps {\r\n    data: string|null,\r\n    description: string|null\r\n}\r\nexport class AwardDisplay extends React.Component<AwardDisplayProps, {}> {\r\n    private type: AwardType;\r\n    private description: string;\r\n    constructor(props: AwardDisplayProps, context: {}) {\r\n        super(props, context)\r\n        if(this.props.data === 'best_paper') {\r\n            this.type = AwardType.best_paper;\r\n            this.description = this.props.description ? this.props.description : 'Best Paper';\r\n        } else if(this.props.data === 'honorable_mention') {\r\n            this.type = AwardType.honorable_mention;\r\n            this.description = this.props.description ? this.props.description : 'Honorable Mention';\r\n        } else {\r\n            this.type = AwardType.none;\r\n            this.description = this.props.description ? this.props.description : '';\r\n        }\r\n    }\r\n    public render():JSX.Element {\r\n        const iconDisplay = (this.type === AwardType.best_paper) ? <i className='fas fa-trophy'></i> :\r\n                        (this.type === AwardType.honorable_mention ? <i className=\"fas fa-award\"></i>: <i />);\r\n                    \r\n        return <span className='paper-award'>{iconDisplay} {this.description}</span>;\r\n    }\r\n}\r\n\r\nexport function getDownloadName(pub: StrapiPublication): string {\r\n    let shortAuthors: string = '';\r\n    if(pub.authors.length === 1) {\r\n        shortAuthors = `${pub.authors[0].family_name}`;\r\n    } else if(pub.authors.length === 2) {\r\n        shortAuthors = `${pub.authors[0].family_name} and ${pub.authors[1].family_name}`;\r\n    } else if(pub.authors.length > 2) {\r\n        shortAuthors = `${pub.authors[0].family_name} et al`;\r\n    }\r\n    let short_venue_year: string = '';\r\n    if(pub.venue) {\r\n        short_venue_year = `${pub.venue.short_name}${pub.venue.year}`;\r\n    } else {\r\n        short_venue_year = ``;\r\n    }\r\n    return `${shortAuthors}-${short_venue_year}-${pub.title}`.replace(/ /g, '_').replace(/[^\\w_-]/g, '');\r\n}\r\n\r\nexport function getDateRangeString(from: Date, to: Date): string {\r\n    const fromYear = from.toLocaleString('default', { year: 'numeric' });\r\n    const toYear = to.toLocaleString('default', { year: 'numeric' });\r\n    const fromMonth = from.toLocaleString('default', { month: 'short' });\r\n    const toMonth = to.toLocaleString('default', { month: 'short' });\r\n    const fromDay = from.toLocaleString('default', { day: 'numeric' });\r\n    const toDay = to.toLocaleString('default', { day: 'numeric' });\r\n\r\n    if(fromYear === toYear) {\r\n        if(fromMonth === toMonth) {\r\n            if(fromDay === toDay) {\r\n                return `${fromMonth} ${fromDay}`;\r\n            } else {\r\n                return `${fromMonth} ${fromDay} – ${toDay}`;\r\n            }\r\n        } else {\r\n            return `${fromMonth} ${fromDay} – ${toMonth} ${toDay}`;\r\n        }\r\n    } else {\r\n        return `${fromMonth} ${fromDay} ${fromYear} – ${toMonth} ${toDay} ${toYear}`;\r\n    }\r\n}","import { graphql } from 'gatsby';\r\nimport * as React from 'react';\r\nimport { StrapiPublicationGroupConnection, StrapiClusterConnection, StrapiAuthor, StrapiPublication } from '../../graphql-types';\r\nimport { Layout, SpotPage } from '../components/layout';\r\nimport { PublicationListDisplay, PublicationDetailLevel } from '../components/publication-list';\r\nimport * as ReactMarkdown from 'react-markdown';\r\nimport { AuthorListDisplay } from '../components/authors';\r\n\r\n\r\nexport const indexQuery = graphql`query allPubs {\r\n    allStrapiPublication {\r\n        nodes {\r\n            id\r\n            strapiId\r\n            title\r\n            award\r\n            award_description\r\n            pub_details\r\n            short_description\r\n            authors {\r\n                id\r\n                given_name\r\n                family_name\r\n                homepage\r\n                membership\r\n                use_local_homepage\r\n            }\r\n            venue {\r\n                id\r\n                location\r\n                year\r\n                homepage\r\n                conference_start\r\n                conference_end\r\n                short_name\r\n                full_name\r\n                type\r\n            }\r\n            pdf {\r\n                publicURL\r\n            }\r\n        }\r\n    }\r\n    allStrapiCluster {\r\n        nodes {\r\n            id\r\n            title\r\n            description\r\n            publications {\r\n                id\r\n            }\r\n            authors {\r\n                id\r\n                family_name\r\n                given_name\r\n                homepage\r\n                membership\r\n            }\r\n        }\r\n    }\r\n}`;\r\n\r\ninterface IndexPageProps {\r\n    data: {\r\n        allStrapiPublication: StrapiPublicationGroupConnection,\r\n        allStrapiCluster: StrapiClusterConnection\r\n    }\r\n}\r\n\r\nexport default class extends React.Component<IndexPageProps, {}> {\r\n    constructor(props: IndexPageProps, context: {}) {\r\n        super(props, context);\r\n    }\r\n    public render() {\r\n        const { data } = this.props;\r\n        const focusAreas = data.allStrapiCluster.nodes.map((cluster) => {\r\n            const { id, title, description, authors, publications } = cluster;\r\n            const authorDisplays = <AuthorListDisplay withLinks={true} authors={authors as any} />\r\n            const detailedPubs = publications.map((pub) => {\r\n                const { id } = pub;\r\n                return data.allStrapiPublication.nodes.find((p: StrapiPublication) => p.strapiId===id);\r\n            });\r\n            return <div key={id} className=\"row\">\r\n                <div className=\"col-md-4\">\r\n                    <h5>{title}</h5>\r\n                    <div><strong>People: </strong>{authorDisplays}</div>\r\n                    <ReactMarkdown source={description} />\r\n                </div>\r\n                <div className=\"col-md-8\">\r\n                    <div><strong>Publications: </strong></div>\r\n                    <PublicationListDisplay detailLevel={PublicationDetailLevel.title} data={detailedPubs} groupByVenue={false} />\r\n                </div>\r\n            </div>;\r\n        });\r\n        shuffle(focusAreas);\r\n\r\n        return <Layout active={SpotPage.research}>\r\n            <div className=\"container\">\r\n                <h2>Focus Areas</h2> {focusAreas}\r\n                <h2 id='all-publications'>All Publications</h2> <PublicationListDisplay groupByVenue={false} data={ data.allStrapiPublication.nodes } />\r\n            </div>\r\n        </Layout>;\r\n    }\r\n}\r\n\r\nfunction shuffle(a: any[]): any[] {\r\n    for (let i = a.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [a[i], a[j]] = [a[j], a[i]];\r\n    }\r\n    return a;\r\n}","import '@fortawesome/fontawesome-free/scss/fontawesome.scss';\r\nimport '@fortawesome/fontawesome-free/scss/solid.scss';\r\nimport * as React from 'react';\r\nimport { StrapiPublication, StrapiPublicationVenue } from '../../graphql-types';\r\nimport { PublicationSummaryDisplay } from './publications';\r\n\r\nexport enum PublicationDetailLevel {\r\n    title='title', title_author_venue='title_author_venue'\r\n}\r\n\r\ninterface PublicationListDisplayProps {\r\n    groupByVenue: boolean;\r\n    data: ReadonlyArray<StrapiPublication>\r\n    detailLevel?: PublicationDetailLevel\r\n    backTo?: number\r\n    highlightAuthors?: number[]\r\n}\r\nexport class PublicationListDisplay extends React.Component<PublicationListDisplayProps, {}> {\r\n    constructor(props: PublicationListDisplayProps, context: {}) {\r\n        super(props, context)\r\n    }\r\n    public render() {\r\n        const { data, groupByVenue, backTo } = this.props;\r\n        const venuePubs: Map<number, StrapiPublication[]> = new Map();\r\n        const idToVenueYear: Map<number, StrapiPublicationVenue> = new Map();\r\n        const venueTimes: Map<number, number> = new Map();\r\n        data.forEach((pub) => {\r\n            const { venue } = pub;\r\n            if(!backTo || venue.year >= backTo) {\r\n                const vid = venue ? venue.id : -1;\r\n                if(venuePubs.has(vid)) {\r\n                    venuePubs.get(vid).push(pub);\r\n                } else {\r\n                    venuePubs.set(vid, [pub]);\r\n                    idToVenueYear.set(vid, venue);\r\n                }\r\n\r\n                if(venue && venue.conference_start && venue.conference_start.match(new RegExp(\"\\\\d+/\\\\d+\")) && venue.year) {\r\n                    const { conference_start, year } = venue;\r\n                    const [month, day] = conference_start.split('/').map(d => parseInt(d));\r\n                    venueTimes.set(vid, new Date(`${year}-${month}-${day}`).getTime());\r\n                }\r\n            }\r\n        });\r\n        const vOrder = Array.from(venuePubs.keys()).sort((a, b) => {\r\n            const aVenueTime = venueTimes.has(a) ? venueTimes.get(a) : -1;\r\n            const bVenueTime = venueTimes.has(b) ? venueTimes.get(b) : -1;\r\n            return bVenueTime - aVenueTime;\r\n        });\r\n        if(groupByVenue) {\r\n            const vyDisplays: (JSX.Element|string)[] = vOrder.map((vid: number) => {\r\n                let venueString: string;\r\n                const venue = idToVenueYear.get(vid);\r\n                if(venue) {\r\n                    venueString = `${venue.short_name} ${venue.year}`;\r\n                } else {\r\n                    venueString = `...`;\r\n                }\r\n\r\n                const pubDisplays = venuePubs.get(vid).map((pub) => {\r\n                    return <li key={pub.id}><PublicationSummaryDisplay detailLevel={this.props.detailLevel} data={pub} /></li>;\r\n                });\r\n\r\n                const venueDisplay = venue.homepage ?\r\n                    <span className=\"venue\"><a href={venue.homepage} target='_blank'>{venueString}</a></span> :\r\n                    <span className=\"venue\">{venueString}</span>;\r\n\r\n                return <li key={vid}>\r\n                    {venueDisplay}\r\n                    <ul>{pubDisplays}</ul>\r\n                </li>;\r\n            });\r\n\r\n            return <ul className=\"publication-list\">\r\n                {vyDisplays}\r\n            </ul>;\r\n        } else {\r\n            const pubDisplays: JSX.Element[] = [];\r\n            vOrder.forEach((vyid: number) => {\r\n                venuePubs.get(vyid).forEach((pub) => {\r\n                    pubDisplays.push(<li key={pub.id}><PublicationSummaryDisplay detailLevel={this.props.detailLevel} highlightAuthors={this.props.highlightAuthors} data={pub} /></li>);\r\n                });\r\n            });\r\n\r\n            return <ul className=\"publication-list\">{pubDisplays}</ul>;\r\n        }\r\n    }\r\n}"],"sourceRoot":""}