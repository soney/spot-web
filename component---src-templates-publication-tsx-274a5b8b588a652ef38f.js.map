{"version":3,"sources":["webpack:///./src/templates/publication.tsx"],"names":["pubQuery","props","context","render","publication","this","data","strapiPublication","authors","allStrapiVenue","nodes","Array","from","authorsDisplay","withLinks","awardDisplay","award","description","award_description","downloadName","getDownloadName","venue_str","venue","short_name","year","pdfDisplay","pdf","className","href","publicURL","download","title","abstract","React"],"mappings":"qQAQO,IAAMA,EAAW,a,sBA4CpB,WAAYC,EAAyBC,GAAa,OAC9C,YAAMD,EAAOC,IADiC,K,0GAG3CC,OAAP,WACI,IAAMC,EAAcC,KAAKJ,MAAMK,KAAKC,kBAG9BC,GAFSH,KAAKJ,MAAMK,KAAKG,eAAeC,MAE9BC,MAAMC,KAAKR,EAAYI,UACjCK,EAAiB,gBAAC,IAAD,CAAmBC,WAAW,EAAMN,QAASA,IAC9DO,EAAe,gBAAC,IAAD,CAAcT,KAAMF,EAAYY,MAAOC,YAAab,EAAYc,oBAC/EC,EAAeC,YAAgBhB,GAEjCiB,EAAoB,GACxB,GAAGjB,EAAYkB,MAAO,KACVA,EAAUlB,EAAVkB,MAEJD,EADDC,EACgBA,EAAMC,WAAZ,IAA0BnB,EAAYkB,MAAME,KAEzC,GAAGpB,EAAYkB,MAAME,UAGrCH,EAAY,GAGhB,IAAMI,EAAarB,EAAYsB,IAAM,qBAAGC,UAAU,4BAA4BC,KAAMxB,EAAYsB,IAAIG,UAAWC,SAAUX,GAApF,OAA4G,KACjJ,OACI,gBAAC,IAAD,KACI,uBAAKQ,UAAU,aACX,uBAAKA,UAAU,OACX,uBAAKA,UAAU,OACX,sBAAIA,UAAU,eAAevB,EAAY2B,SAGjD,uBAAKJ,UAAU,OACX,uBAAKA,UAAU,OACX,sBAAIA,UAAU,iBAAiBd,KAGvC,uBAAKc,UAAU,OACX,uBAAKA,UAAU,YACX,sBAAIA,UAAU,eAAeN,GAC5BN,EACAU,GAEL,qBAAGE,UAAU,4BACRvB,EAAY4B,c,GA9CZC","file":"component---src-templates-publication-tsx-274a5b8b588a652ef38f.js","sourcesContent":["import { graphql } from 'gatsby';\nimport * as React from 'react';\nimport { StrapiAuthor, StrapiPublication, StrapiVenueConnection } from '../../graphql-types';\nimport { AuthorListDisplay } from '../components/authors';\nimport { Layout } from '../components/layout';\nimport { AwardDisplay, getDownloadName } from '../components/publications';\nimport './publication.scss';\n\nexport const pubQuery = graphql`query publication($id: String!) {\n    strapiPublication(id: {eq: $id}) {\n        id\n        title\n        abstract\n        award\n        pdf {\n            id\n            publicURL\n        }\n        authors {\n            id\n            membership\n            given_name\n            family_name\n            homepage\n        }\n        venue {\n            id\n            year\n            short_name\n            homepage\n        }\n    }\n    allStrapiVenue {\n        nodes {\n            id,\n            strapiId\n            full_name\n            short_name\n            type\n        }\n    }\n}`;\n\n\ninterface PublicationProps {\n    data: {\n        strapiPublication: StrapiPublication,\n        allStrapiVenue: StrapiVenueConnection\n    }\n}\n\nexport default class extends React.Component<PublicationProps, {}> {\n    constructor(props: PublicationProps, context: {}) {\n        super(props, context);\n    }\n    public render() {\n        const publication = this.props.data.strapiPublication;\n        const venues = this.props.data.allStrapiVenue.nodes;\n\n        const authors = Array.from(publication.authors) as any as StrapiAuthor[];\n        const authorsDisplay = <AuthorListDisplay withLinks={true} authors={authors} />;\n        const awardDisplay = <AwardDisplay data={publication.award} description={publication.award_description} />;\n        const downloadName = getDownloadName(publication);\n\n        let venue_str: string = '';\n        if(publication.venue) {\n            const { venue } = publication;\n            if(venue) {\n                venue_str = `${venue.short_name} ${publication.venue.year}`;\n            } else {\n                venue_str = `${publication.venue.year}`;\n            }\n        } else {\n            venue_str = ``;\n        }\n\n        const pdfDisplay = publication.pdf ? <a className=\"btn btn-primary btn-block\" href={publication.pdf.publicURL} download={downloadName}>PDF</a> : null;\n        return (\n            <Layout>\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h1 className=\"paper-title\">{publication.title}</h1>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h2 className=\"paper-authors\">{authorsDisplay}</h2>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-sm-2\">\n                            <h3 className=\"paper-venue\">{venue_str}</h3>\n                            {awardDisplay}\n                            {pdfDisplay}\n                        </div>\n                        <p className=\"col-sm-10 paper-abstract\">\n                            {publication.abstract}\n                        </p>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}"],"sourceRoot":""}