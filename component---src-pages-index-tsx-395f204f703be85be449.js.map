{"version":3,"sources":["webpack:///./src/pages/index.tsx","webpack:///./src/components/members.tsx"],"names":["indexQuery","props","context","render","data","this","active","SpotPage","home","className","source","strapiGroup","overview","highlightPubs","allStrapiAuthor","nodes","to","backTo","groupByVenue","allStrapiPublication","React","MemberListDisplay","memberDisplays","map","node","key","id","MemberDisplay","strapiId","given_name","family_name","short_bio","color","memberContent","fluid","headshot","childImageSharp","alt","highlightMember","pubList","document","querySelector","pubListElements","Array","from","childNodes","memberElement","classList","add","setAttribute","paperRows","querySelectorAll","relevantPaperRows","notRelevantPaperRows","i","length","row","item","getAttribute","split","a","parseInt","indexOf","push","forEach","el","li","parentElement","append","unhighlightMember","remove","removeAttribute","membership","onMouseEnter","onMouseLeave","data-member-id","href","homepage","target"],"mappings":"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","file":"component---src-pages-index-tsx-395f204f703be85be449.js","sourcesContent":["import * as React from 'react'\nimport { MemberListDisplay } from '../components/members';\nimport { PublicationListDisplay } from '../components/publication-list';\nimport { graphql } from 'gatsby';\nimport Link from 'gatsby-link'\nimport { Layout, SpotPage } from '../components/layout';\nimport * as ReactMarkdown from 'react-markdown';\n\nimport { StrapiAuthorGroupConnection, StrapiPublicationGroupConnection, StrapiGroup } from '../../graphql-types';\n\nexport const indexQuery = graphql`query membersAndLeads {\n    allStrapiAuthor(filter: {membership: {in: [\"lead\", \"member\"]}}, sort: {fields: [membership, family_name], order: ASC}) {\n        nodes {\n            id\n            strapiId\n            color\n            given_name\n            family_name\n            middle_name\n            homepage\n            short_bio\n            membership\n            headshot {\n                childImageSharp {\n                    fluid(maxWidth: 700) {\n                        base64\n                        aspectRatio\n                        src\n                        srcSet\n                        sizes\n                    }\n                }\n            }\n        }\n    }\n    allStrapiPublication {\n        nodes {\n            id\n            title\n            award\n            award_description\n            pub_details\n            short_description\n            authors {\n                id\n                given_name\n                family_name\n                homepage\n                membership\n            }\n            venue {\n                id\n                location\n                year\n                homepage\n                conference_start\n                conference_end\n                short_name\n            }\n            pdf {\n                publicURL\n            }\n        }\n    }\n    strapiGroup {\n        overview\n    }\n}`;\n\ninterface IndexPageProps {\n    data: {\n        allStrapiAuthor: StrapiAuthorGroupConnection,\n        allStrapiPublication: StrapiPublicationGroupConnection,\n        strapiGroup: StrapiGroup\n    }\n}\n\nexport default class extends React.Component<IndexPageProps, {}> {\n    constructor(props: IndexPageProps, context: {}) {\n        super(props, context);\n    }\n    public render() {\n        const { data } = this.props;\n        return <Layout active={SpotPage.home}>\n            <div className=\"container\">\n                <ReactMarkdown source={data.strapiGroup.overview} />\n            </div>\n            <div className=\"container\">\n                {/* <h2 className=\"\">People <Link className=\"\" to=\"/people\">(all people)</Link></h2> */}\n                <h2 className=\"\">People</h2>\n                <MemberListDisplay highlightPubs={true} data={data.allStrapiAuthor.nodes} />\n            </div>\n            <div className=\"container\">\n                <h2>Recent publications <Link to=\"/research#all-publications\">(all publications)</Link></h2>\n                <PublicationListDisplay backTo={2016} groupByVenue={false} data={ data.allStrapiPublication.nodes } />\n            </div>\n        </Layout>;\n    }\n}","import Img from 'gatsby-image';\nimport Link from 'gatsby-link';\nimport * as React from 'react';\nimport { StrapiAuthor } from '../../graphql-types';\n\ninterface MemberListDisplayProps {\n    data: ReadonlyArray<StrapiAuthor>,\n    highlightPubs: boolean\n}\n\nexport class MemberListDisplay extends React.Component<MemberListDisplayProps, {}> {\n    constructor(props: MemberListDisplayProps, context: {}) {\n        super(props, context)\n    }\n    public render() {\n        const { data } = this.props;\n        const memberDisplays = data.map((node: StrapiAuthor) => (\n            <div key={node.id} className=\"col col-\"><MemberDisplay highlightPubs={this.props.highlightPubs} data={node} /></div>\n        ));\n        return <div className=\"container\">\n            <div className=\"row\">\n                {memberDisplays}\n            </div>\n        </div>;\n    }\n}\n\ninterface MemberDisplayProps {\n    data: StrapiAuthor,\n    highlightPubs: boolean\n}\n\nclass MemberDisplay extends React.Component<MemberDisplayProps, {}> {\n    constructor(props: MemberDisplayProps, context: {}) {\n        super(props, context);\n    }\n    private pubListElements: ChildNode[];\n    public render(): JSX.Element {\n        const { data } = this.props;\n        const { strapiId, given_name, family_name, short_bio } = data;\n        const color = data.color || '#FFFF00';\n        const memberContent: JSX.Element[] = [\n            <Img className=\"member-headshot\" fluid={data.headshot.childImageSharp.fluid as any} alt={`Headshot of ${given_name} ${family_name}`} />,\n            <div>\n                <span className=\"member-name\">{`${given_name} ${family_name}`}</span>\n            </div>,\n            <div className=\"member-short-bio\">{short_bio}</div>\n        ];\n\n        const highlightMember = () => {\n            if(this.props.highlightPubs) {\n                const pubList = document.querySelector('.publication-list');\n                this.pubListElements = Array.from(pubList.childNodes);\n                const memberElement: Element = document.querySelector(`.member-display[data-member-id='${strapiId}'] .member-name`);\n                if(memberElement) {\n                    memberElement.classList.add('hover-highlight');\n                    memberElement.setAttribute('style', `background-color: ${color}`);\n                }\n\n                const paperRows = document.querySelectorAll('.paper');\n                const relevantPaperRows: Element[] = [];\n                const notRelevantPaperRows: Element[] = [];\n                for(let i: number = 0; i<paperRows.length; i++) {\n                    const row = paperRows.item(i);\n                    const authors = row.getAttribute('data-authors')\n                    const authorIDs = authors.split(',').map((a) => parseInt(a));\n                    if(authorIDs.indexOf(strapiId) >= 0) {\n                        relevantPaperRows.push(row);\n                    } else {\n                        notRelevantPaperRows.push(row);\n                    }\n                }\n\n                relevantPaperRows.forEach((el: Element) => {\n                    el.classList.add('hover-highlight');\n                });\n                notRelevantPaperRows.forEach((el: Element) => {\n                    el.classList.add('hover-no-highlight');\n                    el.setAttribute('style', `opacity: 0.4`);\n                    const li=el.parentElement;\n                    li.parentElement.append(li);\n                });\n\n                const authorElements = document.querySelectorAll(`.paper-author[data-author-id='${strapiId}']`);\n\n                authorElements.forEach((el) => {\n                    el.classList.add('hover-highlight');\n                    el.setAttribute('style', `background-color: ${color}`);\n                });\n            }\n        };\n        const unhighlightMember = () => {\n            if(this.props.highlightPubs) {\n                const pubList = document.querySelector('.publication-list');\n                this.pubListElements.forEach((el) => {\n                    pubList.append(el);\n                })\n                const memberElement = document.querySelector(`.member-display .member-name.hover-highlight`);\n                if(memberElement) {\n                    memberElement.classList.remove('hover-highlight');\n                    memberElement.removeAttribute('style');\n                }\n\n                const relevantPaperRows = document.querySelectorAll(`.paper.hover-highlight,.paper.hover-no-highlight`);\n                relevantPaperRows.forEach((el) => {\n                    el.classList.remove('hover-highlight');\n                    el.classList.remove('hover-no-highlight');\n                    el.removeAttribute('style');\n                });\n                const authorElements = document.querySelectorAll(`.paper-author.hover-highlight`);\n                authorElements.forEach((el) => {\n                    el.classList.remove('hover-highlight');\n                    el.removeAttribute('style');\n                });\n            }\n        };\n\n        if(data.membership === 'lead') {\n            return <Link onMouseEnter = {highlightMember} onMouseLeave = {unhighlightMember} className=\"member-display\" data-member-id={strapiId} to={`/${data.given_name}_${data.family_name}`}>{memberContent}</Link>;\n        } else {\n            return <a onMouseEnter={highlightMember} onMouseLeave={unhighlightMember} className=\"member-display\" data-member-id={strapiId} href={data.homepage} target=\"_blank\">{memberContent}</a>;\n        }\n    }\n}"],"sourceRoot":""}