{"version":3,"sources":["webpack:///./src/components/authors.tsx","webpack:///./src/templates/publication.tsx","webpack:///./src/components/publications.tsx","webpack:///./src/components/publication-list.tsx"],"names":["AuthorDisplay","props","context","render","data","this","className","highlight","withLinks","membership","data-author-id","id","to","given_name","family_name","homepage","href","target","React","AuthorListDisplay","highlightAuthors","authorDisplays","authors","map","a","includes","key","length","splice","i","pubQuery","publication","strapiPublication","Array","from","authorsDisplay","awardDisplay","award","description","award_description","downloadName","getDownloadName","venue_str","venue","short_name","year","pdfDisplay","pdf","publicURL","download","active","SpotPage","research","additionalInfo","title","abstract","AwardType","PublicationSummaryDisplay","detailLevel","PublicationDetailLevel","data-authors","join","short_description","AwardDisplay","type","best_paper","honorable_mention","none","iconDisplay","pub","shortAuthors","replace","PublicationListDisplay","groupByVenue","backTo","venuePubs","Map","idToVenueYear","venueTimes","forEach","vid","has","get","push","set","conference_start","match","RegExp","split","d","parseInt","month","day","Date","getTime","vOrder","keys","sort","b","aVenueTime","vyDisplays","venueString","pubDisplays","venueDisplay","vyid"],"mappings":"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","file":"component---src-templates-publication-tsx-bf88c717e207d6d52e08.js","sourcesContent":["import * as React from 'react'\nimport { StrapiAuthor } from '../../graphql-types';\nimport Link from 'gatsby-link'\n\ninterface AuthorDisplayProps {\n    data: StrapiAuthor,\n    withLinks?: boolean,\n    highlight?: boolean\n}\n\nexport class AuthorDisplay extends React.Component<AuthorDisplayProps, {}> {\n    constructor(props: AuthorDisplayProps, context: {}) {\n        super(props, context);\n    }\n    public render(): JSX.Element {\n        const { data } = this.props;\n        const className = this.props.highlight ? 'highlight paper-author' : 'paper-author';\n        if(this.props.withLinks) {\n            if((data.membership === 'lead')/* || (data.membership === 'member')*/) {\n                return <span data-author-id={data.id} className={className}><Link className=\"author-internal-link\" to={`/${data.given_name}_${data.family_name}`}>{`${data.given_name} ${data.family_name}`}</Link></span>\n            } else if(data.homepage) {\n                return <span data-author-id={data.id} className={className}><a className=\"author-external-link\" href={data.homepage} target=\"_blank\">{`${data.given_name} ${data.family_name}`}</a></span>\n            }\n        }\n        return <span data-author-id={data.id} className={className}>{`${data.given_name} ${data.family_name}`}</span>\n    }\n}\n\ninterface AuthorListDisplayProps {\n    authors: ReadonlyArray<StrapiAuthor>,\n    withLinks?: boolean\n    highlightAuthors?: number[]\n}\nexport class AuthorListDisplay extends React.Component<AuthorListDisplayProps, {}> {\n    constructor(props: AuthorListDisplayProps, context: {}) {\n        super(props, context);\n    }\n\n    public render(): JSX.Element {\n        const { highlightAuthors, authors } = this.props;\n        const authorDisplays:(string | JSX.Element)[] = authors.map((a) => <AuthorDisplay highlight={(highlightAuthors && (highlightAuthors.includes(a.id as any)))} withLinks={this.props.withLinks} key={a.id} data={a} />)\n        if (authorDisplays.length === 2) {\n            authorDisplays.splice(1, 0, ' and ');\n        } else if (authorDisplays.length > 2) {\n            authorDisplays.splice(authorDisplays.length-1, 0, ', and ');\n            for(let i: number = authorDisplays.length-3; i>0; i--) {\n                authorDisplays.splice(i, 0, ', ');\n            }\n        }\n\n        return <span className='paper-author-list'>{authorDisplays}</span>;\n    }\n}","import { graphql } from 'gatsby';\nimport * as React from 'react';\nimport { StrapiAuthor, StrapiPublication, StrapiVenueConnection } from '../../graphql-types';\nimport { AuthorListDisplay } from '../components/authors';\nimport { Layout, SpotPage } from '../components/layout';\nimport { AwardDisplay, getDownloadName } from '../components/publications';\nimport './publication.scss';\n\nexport const pubQuery = graphql`query publication($id: String!) {\n    strapiPublication(id: {eq: $id}) {\n        id\n        title\n        abstract\n        award\n        pdf {\n            id\n            publicURL\n        }\n        authors {\n            id\n            membership\n            given_name\n            family_name\n            homepage\n        }\n        venue {\n            id\n            year\n            short_name\n            homepage\n        }\n    }\n}`;\n\n\ninterface PublicationProps {\n    data: {\n        strapiPublication: StrapiPublication,\n        allStrapiVenue: StrapiVenueConnection\n    }\n}\n\nexport default class extends React.Component<PublicationProps, {}> {\n    constructor(props: PublicationProps, context: {}) {\n        super(props, context);\n    }\n    public render() {\n        const publication = this.props.data.strapiPublication;\n\n        const authors = Array.from(publication.authors) as any as StrapiAuthor[];\n        const authorsDisplay = <AuthorListDisplay withLinks={true} authors={authors} />;\n        const awardDisplay = <AwardDisplay data={publication.award} description={publication.award_description} />;\n        const downloadName = getDownloadName(publication);\n\n        let venue_str: string|JSX.Element = '';\n        if(publication.venue) {\n            const { venue } = publication;\n            if(venue) {\n                venue_str = `${venue.short_name} ${publication.venue.year}`;\n            } else {\n                venue_str = `${publication.venue.year}`;\n            }\n\n            if(venue.homepage) {\n                venue_str = <a target='_blank' href={venue.homepage}>{venue_str}</a>;\n            }\n        } else {\n            venue_str = ``;\n        }\n\n        const pdfDisplay = publication.pdf ? <a className=\"btn btn-primary btn-block\" href={publication.pdf.publicURL} download={downloadName}>PDF</a> : null;\n        return (\n            <Layout active={SpotPage.research} additionalInfo={publication.title}>\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h1 className=\"paper-title\">{publication.title}</h1>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h2 className=\"paper-authors\">{authorsDisplay}</h2>\n                        </div>\n                    </div>\n                    <div className=\"row\">\n                        <div className=\"col-sm-2\">\n                            <h3 className=\"paper-venue\">\n                                {venue_str}\n                            </h3>\n                            {awardDisplay}\n                            {pdfDisplay}\n                        </div>\n                        <p className=\"col-sm-10 paper-abstract\">\n                            {publication.abstract}\n                        </p>\n                    </div>\n                </div>\n            </Layout>\n        );\n    }\n}","import '@fortawesome/fontawesome-free/scss/fontawesome.scss';\nimport '@fortawesome/fontawesome-free/scss/solid.scss';\nimport Link from 'gatsby-link';\nimport * as React from 'react';\nimport { StrapiAuthor, StrapiPublication } from '../../graphql-types';\nimport { AuthorListDisplay } from './authors';\nimport { PublicationDetailLevel } from './publication-list';\n\n\ninterface PublicationSummaryDisplayProps {\n    data: StrapiPublication\n    highlightAuthors?: number[]\n    detailLevel: PublicationDetailLevel\n}\n\nexport class PublicationSummaryDisplay extends React.Component<PublicationSummaryDisplayProps, {}> {\n    constructor(props: PublicationSummaryDisplayProps, context: {}) {\n        super(props, context)\n    }\n    public render(): JSX.Element {\n        const { data } = this.props;\n        const authors = Array.from(data.authors) as any as StrapiAuthor[];\n        const downloadName = getDownloadName(data);\n\n        if(this.props.detailLevel === PublicationDetailLevel.title) {\n            return <Link className=\"paper-title\" to={`/${downloadName}`}>{data.title}</Link>;\n        } else {\n            return <div className=\"paper row\" data-authors={authors.map((a) => a.id).join(',')}>\n                <div className=\"col-sm-10\">\n                    <Link className=\"paper-title\" to={`/${downloadName}`}>{data.title}</Link>\n                    <div className=\"paper-authors\"><AuthorListDisplay authors={authors} withLinks={true} highlightAuthors={this.props.highlightAuthors} /></div>\n                    {data.short_description && <p className=\"paper-description\">{data.short_description}</p>}\n                </div>\n                <div className=\"col-sm-2 text-left\">\n                    <div className=\"paper-venue\">{data.venue.short_name} {data.venue.year}</div>\n                    <div className=\"paper-award\"><AwardDisplay data={data.award} description={data.award_description} /></div>\n                </div>\n            </div>;\n        }\n    }\n}\n\nenum AwardType {\n    best_paper,\n    honorable_mention,\n    none\n};\ninterface AwardDisplayProps {\n    data: string|null,\n    description: string|null\n}\nexport class AwardDisplay extends React.Component<AwardDisplayProps, {}> {\n    private type: AwardType;\n    private description: string;\n    constructor(props: AwardDisplayProps, context: {}) {\n        super(props, context)\n        if(this.props.data === 'best_paper') {\n            this.type = AwardType.best_paper;\n            this.description = this.props.description ? this.props.description : 'Best Paper';\n        } else if(this.props.data === 'honorable_mention') {\n            this.type = AwardType.honorable_mention;\n            this.description = this.props.description ? this.props.description : 'Honorable Mention';\n        } else {\n            this.type = AwardType.none;\n            this.description = this.props.description ? this.props.description : '';\n        }\n    }\n    public render():JSX.Element {\n        const iconDisplay = (this.type === AwardType.best_paper) ? <i className='fas fa-trophy'></i> :\n                        (this.type === AwardType.honorable_mention ? <i className=\"fas fa-award\"></i>: <i />);\n                    \n        return <span className='paper-award'>{iconDisplay} {this.description}</span>;\n    }\n}\n\nexport function getDownloadName(pub: StrapiPublication): string {\n    let shortAuthors: string = '';\n    if(pub.authors.length === 1) {\n        shortAuthors = `${pub.authors[0].family_name}`;\n    } else if(pub.authors.length === 2) {\n        shortAuthors = `${pub.authors[0].family_name} and ${pub.authors[1].family_name}`;\n    } else if(pub.authors.length > 2) {\n        shortAuthors = `${pub.authors[0].family_name} et al`;\n    }\n    let short_venue_year: string = '';\n    if(pub.venue) {\n        short_venue_year = `${pub.venue.short_name}${pub.venue.year}`;\n    } else {\n        short_venue_year = ``;\n    }\n    return `${shortAuthors}-${short_venue_year}-${pub.title}`.replace(/ /g, '_').replace(/[^\\w_-]/g, '');\n}\n\nexport function getDateRangeString(from: Date, to: Date): string {\n    const fromYear = from.toLocaleString('default', { year: 'numeric' });\n    const toYear = to.toLocaleString('default', { year: 'numeric' });\n    const fromMonth = from.toLocaleString('default', { month: 'short' });\n    const toMonth = to.toLocaleString('default', { month: 'short' });\n    const fromDay = from.toLocaleString('default', { day: 'numeric' });\n    const toDay = to.toLocaleString('default', { day: 'numeric' });\n\n    if(fromYear === toYear) {\n        if(fromMonth === toMonth) {\n            if(fromDay === toDay) {\n                return `${fromMonth} ${fromDay}`;\n            } else {\n                return `${fromMonth} ${fromDay} – ${toDay}`;\n            }\n        } else {\n            return `${fromMonth} ${fromDay} – ${toMonth} ${toDay}`;\n        }\n    } else {\n        return `${fromMonth} ${fromDay} ${fromYear} – ${toMonth} ${toDay} ${toYear}`;\n    }\n}","import '@fortawesome/fontawesome-free/scss/fontawesome.scss';\nimport '@fortawesome/fontawesome-free/scss/solid.scss';\nimport * as React from 'react';\nimport { StrapiPublication, StrapiPublicationVenue } from '../../graphql-types';\nimport { PublicationSummaryDisplay } from './publications';\n\nexport enum PublicationDetailLevel {\n    title='title', title_author_venue='title_author_venue'\n}\n\ninterface PublicationListDisplayProps {\n    groupByVenue: boolean;\n    data: ReadonlyArray<StrapiPublication>\n    detailLevel?: PublicationDetailLevel\n    backTo?: number\n    highlightAuthors?: number[]\n}\nexport class PublicationListDisplay extends React.Component<PublicationListDisplayProps, {}> {\n    constructor(props: PublicationListDisplayProps, context: {}) {\n        super(props, context)\n    }\n    public render() {\n        const { data, groupByVenue, backTo } = this.props;\n        const venuePubs: Map<number, StrapiPublication[]> = new Map();\n        const idToVenueYear: Map<number, StrapiPublicationVenue> = new Map();\n        const venueTimes: Map<number, number> = new Map();\n        data.forEach((pub) => {\n            const { venue } = pub;\n            if(!backTo || venue.year >= backTo) {\n                const vid = venue ? venue.id : -1;\n                if(venuePubs.has(vid)) {\n                    venuePubs.get(vid).push(pub);\n                } else {\n                    venuePubs.set(vid, [pub]);\n                    idToVenueYear.set(vid, venue);\n                }\n\n                if(venue && venue.conference_start && venue.conference_start.match(new RegExp(\"\\\\d+/\\\\d+\")) && venue.year) {\n                    const { conference_start, year } = venue;\n                    const [month, day] = conference_start.split('/').map(d => parseInt(d));\n                    venueTimes.set(vid, new Date(`${year}-${month}-${day}`).getTime());\n                }\n            }\n        });\n        const vOrder = Array.from(venuePubs.keys()).sort((a, b) => {\n            const aVenueTime = venueTimes.has(a) ? venueTimes.get(a) : -1;\n            const bVenueTime = venueTimes.has(b) ? venueTimes.get(b) : -1;\n            return bVenueTime - aVenueTime;\n        });\n        if(groupByVenue) {\n            const vyDisplays: (JSX.Element|string)[] = vOrder.map((vid: number) => {\n                let venueString: string;\n                const venue = idToVenueYear.get(vid);\n                if(venue) {\n                    venueString = `${venue.short_name} ${venue.year}`;\n                } else {\n                    venueString = `...`;\n                }\n\n                const pubDisplays = venuePubs.get(vid).map((pub) => {\n                    return <li key={pub.id}><PublicationSummaryDisplay detailLevel={this.props.detailLevel} data={pub} /></li>;\n                });\n\n                const venueDisplay = venue.homepage ?\n                    <span className=\"venue\"><a href={venue.homepage} target='_blank'>{venueString}</a></span> :\n                    <span className=\"venue\">{venueString}</span>;\n\n                return <li key={vid}>\n                    {venueDisplay}\n                    <ul>{pubDisplays}</ul>\n                </li>;\n            });\n\n            return <ul className=\"publication-list\">\n                {vyDisplays}\n            </ul>;\n        } else {\n            const pubDisplays: JSX.Element[] = [];\n            vOrder.forEach((vyid: number) => {\n                venuePubs.get(vyid).forEach((pub) => {\n                    pubDisplays.push(<li key={pub.id}><PublicationSummaryDisplay detailLevel={this.props.detailLevel} highlightAuthors={this.props.highlightAuthors} data={pub} /></li>);\n                });\n            });\n\n            return <ul className=\"publication-list\">{pubDisplays}</ul>;\n        }\n    }\n}"],"sourceRoot":""}